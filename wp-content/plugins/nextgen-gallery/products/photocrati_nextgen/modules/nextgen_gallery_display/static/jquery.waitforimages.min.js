!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){var r=function(e){return e.srcset&&e.sizes}(new Image);e.waitForImages={hasImageProperties:["backgroundImage","listStyleImage","borderImage","borderCornerImage","cursor"],hasImageAttributes:["srcset"]},e.expr.pseudos["has-src"]=function(r){return e(r).is('img[src][src!=""]')},e.expr.pseudos.uncached=function(r){return!!e(r).is(":has-src")&&!r.complete},e.fn.waitForImages=function(){var s,t,i,n=0,a=0,c=e.Deferred(),o=this,u=[],h=e.waitForImages.hasImageProperties||[],f=e.waitForImages.hasImageAttributes||[],l=/url\(\s*(['"]?)(.*?)\1\s*\)/g;if(e.isPlainObject(arguments[0])?(i=arguments[0].waitForAll,t=arguments[0].each,s=arguments[0].finished):1===arguments.length&&"boolean"===e.type(arguments[0])?i=arguments[0]:(s=arguments[0],t=arguments[1],i=arguments[2]),s=s||e.noop,t=t||e.noop,i=!!i,!e.isFunction(s)||!e.isFunction(t))throw new TypeError("An invalid callback was supplied.");return this.each(function(){var r=e(this);i?r.find("*").addBack().each(function(){var r=e(this);r.is("img:has-src")&&!r.is("[srcset]")&&u.push({src:r.attr("src"),element:r[0]}),e.each(h,function(e,s){var t,i=r.css(s);if(!i)return!0;for(;t=l.exec(i);)u.push({src:t[2],element:r[0]})}),e.each(f,function(e,s){var t=r.attr(s);if(!t)return!0;u.push({src:r.attr("src"),srcset:r.attr("srcset"),element:r[0]})})}):r.find("img:has-src").each(function(){u.push({src:this.src,element:this})})}),n=u.length,a=0,0===n&&(s.call(o),c.resolveWith(o)),e.each(u,function(i,u){var h=new Image,f="load.waitForImages error.waitForImages";e(h).one(f,function r(i){var h=[a,n,"load"==i.type];if(a++,t.apply(u.element,h),c.notifyWith(u.element,h),e(this).off(f,r),a==n)return s.call(o[0]),c.resolveWith(o[0]),!1}),r&&u.srcset&&(h.srcset=u.srcset,h.sizes=u.sizes),h.src=u.src}),c.promise()}});